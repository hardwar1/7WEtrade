{"version":3,"sources":["01__main.js"],"names":["document","addEventListener","qOne","selector","querySelector","qAll","querySelectorAll","window","e","console","log","key","i","jsHide","classList","remove","overlay","burger","menu","item","this","toggle","header","toTop","scrollTop","top","scrollY","add","anchors","slice","call","forEach","preventDefault","coordY","getAttribute","getBoundingClientRect","pageYOffset","scroller","setInterval","Math","abs","scrollTo","clearInterval","scrollBy","animationTime","Swiper","slidesPerView","pagination","el","clickable","renderBullet","index","className","navigation","nextEl","prevEl","swiperControlsWrapper","closest","insertAdjacentHTML","innerHTML","clickDots","clickDotsArrays","dots","concat","btnArr","currentSlide","originalDots","fakedDots","length","contains","click","array","changeSlide","jsRegister","jsLogin","articlesTabsBtn","articles","showMenuBtn","tabsMenu","formFieldset","progressbarItem","next","previous","progressbar","style","width","setProperty","persent","arr","selectHeader","select","options","innerText","option","hasAttribute","selectItem","value","masked","elems","mask","event","keyCode","template","def","replace","val","newValue","a","charAt","indexOf","reg","substr","RegExp","test","type","elem","maskPhone"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["'use strict';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  function qOne(selector) {\r\n    return document.querySelector(selector);\r\n  }\r\n\r\n  function qAll(selector) {\r\n    return document.querySelectorAll(selector);\r\n  }\r\n\r\n  window.addEventListener('keydown', (e) => {\r\n    console.log(e)\r\n    if (e.key == 'Escape') {\r\n      for (let i of jsHide)\r\n        i.classList.remove('active');\r\n      overlay.classList.remove('overlay--active')\r\n    }\r\n  })\r\n\r\n  //burger mobile menu\r\n  const\r\n    burger = qOne('.burger'),\r\n    menu = qOne('.menu'),\r\n    overlay = qOne('.overlay'),\r\n    jsHide = qAll('.js-hide');\r\n\r\n  overlay.addEventListener('click', function () {\r\n    for (let item of jsHide) {\r\n      item.classList.remove('active')\r\n    }\r\n    this.classList.remove('overlay--active')\r\n  });\r\n\r\n  burger.addEventListener('click', function () {\r\n    this.classList.toggle('burger--close');\r\n    menu.classList.toggle('header__menu--show');\r\n  });\r\n\r\n  menu.addEventListener('click', function () {\r\n    this.classList.remove('header__menu--show');\r\n    burger.classList.remove('burger--close');\r\n  });\r\n\r\n  // скроллы якорных ссылок\r\n  const header = qOne('.header'),\r\n    toTop = qOne('.to-top');\r\n\r\n  let scrollTop,\r\n    top = 0;\r\n\r\n  window.addEventListener('scroll', function () {\r\n    scrollTop = window.scrollY;\r\n\r\n    if (scrollTop > 100) {\r\n      header.classList.add('header--scroll');\r\n    } else {\r\n      header.classList.remove('header--scroll');\r\n    }\r\n\r\n    if (top < scrollTop && top > 500 && !qOne('.header__menu--show')) {\r\n      header.classList.add('header--hide');\r\n      top = scrollTop;\r\n    } else {\r\n      header.classList.remove('header--hide');\r\n      top = scrollTop;\r\n    }\r\n\r\n    if (scrollTop > 1000) {\r\n      toTop.classList.add('to-top--show');\r\n    } else {\r\n      toTop.classList.remove('to-top--show');\r\n    }\r\n  });\r\n\r\n  // скроллы якорных ссылок\r\n  const anchors = [].slice.call(document.querySelectorAll('a[href*=\"#\"]')),\r\n    animationTime = 1000,\r\n    framesCount = 200;\r\n\r\n  anchors.forEach(function (item) {\r\n    item.addEventListener('click', function (e) {\r\n      e.preventDefault();\r\n      let coordY = document.querySelector(item.getAttribute('href')).getBoundingClientRect().top + window.pageYOffset;\r\n\r\n      let scroller = setInterval(function () {\r\n        // скорость прокрутки\r\n        let scrollBy = 12;\r\n        if (Math.abs(window.pageYOffset - coordY) < scrollBy) {\r\n          window.scrollTo(0, coordY);\r\n          clearInterval(scroller);\r\n        } else if (scrollBy < window.pageYOffset - coordY) {\r\n          window.scrollBy(0, -scrollBy);\r\n        } else if (scrollBy > window.pageYOffset - coordY) {\r\n          window.scrollBy(0, scrollBy);\r\n        }\r\n\r\n      }, animationTime / framesCount);\r\n    });\r\n  });\r\n\r\n\r\n  // слайдеры\r\n  if (qOne('.swiper')) {\r\n    const swiper = new Swiper('.swiper', {\r\n      slidesPerView: 1,\r\n\r\n      pagination: {\r\n        el: '.swiper-pagination',\r\n        clickable: true,\r\n        renderBullet: function (index, className) {\r\n          return '<li class=\"' + className + '\"> </li>';\r\n        },\r\n      },\r\n      navigation: {\r\n        nextEl: '.swiper-button-next',\r\n        prevEl: '.swiper-button-prev',\r\n      },\r\n    });\r\n\r\n    //перемещение на центр контрольных кнопок и дотсов\r\n    const swiperControlsWrapper = qAll('.swiper-controls-wrapper');\r\n\r\n    for (let item of swiperControlsWrapper) {\r\n      item.closest('section').insertAdjacentHTML('beforeend',\r\n        `\r\n        <div class=\"swiper-controls-wrapper js-fake-dots\">\r\n          <button class=\"swiper-controls-wrapper__arrow js-left\" type=\"button\"></button>\r\n          ${item.innerHTML}\r\n          <button class=\"swiper-controls-wrapper__arrow js-right\" data-change=\"1\" type=\"button\"></button>\r\n        </div>\r\n        `\r\n      );\r\n    }\r\n\r\n    // кнопки и дотсы слайдера\r\n    let clickDots = [];\r\n    let clickDotsArrays = qAll('.js-fake-dots');\r\n\r\n    for (let dots of clickDotsArrays) {\r\n      clickDots = clickDots.concat(dots.querySelectorAll('.swiper-pagination-bullet'));\r\n    }\r\n\r\n    const\r\n      btnArrows = qAll('.swiper-controls-wrapper__arrow');\r\n\r\n    function changeSlide(btnArr) {\r\n      for (let item of btnArr) {\r\n        const dots = item.closest('.swiper-controls-wrapper')\r\n          .querySelectorAll('.swiper-pagination-bullet');\r\n        let currentSlide;\r\n\r\n        item.addEventListener('click', function () {\r\n          const originalDots = item.closest('section')\r\n            .querySelector('.swiper')\r\n            .querySelectorAll('.swiper-pagination-bullet'),\r\n            fakedDots = item.closest('.swiper-controls-wrapper').querySelectorAll('li');\r\n\r\n          //проверка текущего слайда\r\n          for (let i = 0; i < originalDots.length; i++) {\r\n            if (originalDots[i].classList.contains('swiper-pagination-bullet-active')) {\r\n              currentSlide = i;\r\n            }\r\n          }\r\n\r\n          // обработка клика по кнопкам и отображение текущего дотса\r\n          if (item.getAttribute('data-change')\r\n            && currentSlide + 1 < dots.length) {\r\n            originalDots[currentSlide + 1].click();\r\n            fakedDots[currentSlide].classList.remove('swiper-pagination-bullet-active');\r\n            fakedDots[currentSlide + 1].classList.add('swiper-pagination-bullet-active');\r\n            currentSlide++;\r\n\r\n          } else if (!item.getAttribute('data-change') && currentSlide > 0) {\r\n            originalDots[currentSlide - 1].click();\r\n            fakedDots[currentSlide].classList.remove('swiper-pagination-bullet-active');\r\n            fakedDots[currentSlide - 1].classList.add('swiper-pagination-bullet-active');\r\n            currentSlide--;\r\n          }\r\n\r\n          // обработка клика по дотсам\r\n          for (let array of clickDots) {\r\n            for (let index = 0; index < array.length; index++) {\r\n              array[index].addEventListener('click', function () {\r\n                let originalDots = array[index].closest('section')\r\n                  .querySelector('.swiper')\r\n                  .querySelectorAll('.swiper-pagination-bullet');\r\n                originalDots[index].click();\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    changeSlide(btnArrows);\r\n  }\r\n\r\n  // открытие форм попапов\r\n  if (qOne('.js-reg')) {\r\n    const jsRegister = qOne('.js-register'),\r\n      jsRegBtn = qOne('.js-reg');\r\n    jsRegBtn.addEventListener('click', () => {\r\n      jsRegister.classList.toggle('active');\r\n      overlay.classList.toggle('overlay--active');\r\n    });\r\n  }\r\n\r\n  if (qOne('.js-log')) {\r\n    const jsLogin = qOne('.js-login'),\r\n      jsLogBtn = qOne('.js-log');\r\n\r\n    jsLogBtn.addEventListener('click', () => {\r\n      jsLogin.classList.toggle('active');\r\n      overlay.classList.toggle('overlay--active');\r\n    });\r\n  }\r\n\r\n  //табы в блоге\r\n  if (qOne('.articles-tabs__btn')) {\r\n    const articlesTabsBtn = qAll('.articles-tabs__btn'),\r\n      articles = qAll('.article');\r\n\r\n    for (let i = 0; i < articlesTabsBtn.length; i++) {\r\n      articlesTabsBtn[i].addEventListener('click', () => {\r\n        for (let item of articlesTabsBtn) {\r\n          item.classList.remove('articles-tabs__btn--active');\r\n        }\r\n        for (let item of articles) {\r\n          item.classList.remove('article--active');\r\n        }\r\n        articlesTabsBtn[i].classList.add('articles-tabs__btn--active');\r\n        articles[i].classList.add('article--active');\r\n      });\r\n    }\r\n\r\n    //адаптив кнопка показа меню\r\n    const showMenuBtn = qOne('.articles-tabs__show-menu'),\r\n      tabsMenu = qOne('.articles-tabs__menu');\r\n\r\n    showMenuBtn.addEventListener('click', () => {\r\n      showMenuBtn.classList.toggle('active');\r\n      tabsMenu.classList.toggle('active');\r\n      overlay.classList.toggle('overlay--active');\r\n    });\r\n  }\r\n\r\n  //попапы с формами\r\n  if (qOne('.popap-form')) {\r\n    const\r\n      formFieldset = qAll('.popap-form__page'),\r\n      progressbarItem = qAll('.progressbar__item'),\r\n      next = qAll('.js-next'),\r\n      previous = qAll('.js-previous'),\r\n      progressbar = qOne('.progressbar');\r\n\r\n    //ширина прогрессбара зависящая от количества страничек\r\n    progressbar.style.width = `${progressbarItem.length * 68 - 68}px`;\r\n\r\n    //клик по кнопке вперед\r\n    for (let i = 0; i < next.length; i++) {\r\n      next[i].addEventListener('click', () => {\r\n        formFieldset[i].classList.remove('popap-form__page--active');\r\n        progressbar.style.setProperty('--progressbar-width', persent(i + 1, formFieldset));\r\n        formFieldset[i + 1].classList.add('popap-form__page--active');\r\n        progressbarItem[i + 1].classList.add('progressbar__item--active');\r\n\r\n        progressbarItem[i + 1].classList.add('progressbar__item--text');\r\n        progressbarItem[i].classList.remove('progressbar__item--text');\r\n      });\r\n    }\r\n\r\n    //клик по кнопке назад\r\n    for (let i = 0; i < previous.length; i++) {\r\n      previous[i].addEventListener('click', () => {\r\n        formFieldset[i].classList.add('popap-form__page--active');\r\n        progressbar.style.setProperty('--progressbar-width', persent(i, formFieldset));\r\n        formFieldset[i + 1].classList.remove('popap-form__page--active');\r\n        progressbarItem[i + 1].classList.remove('progressbar__item--active');\r\n        progressbarItem[i + 1].classList.remove('progressbar__item--text');\r\n        progressbarItem[i].classList.add('progressbar__item--text');\r\n      });\r\n    }\r\n\r\n    // линия прогресса и функция вычисления %\r\n    const progress = () => {\r\n      progressbar.style.setProperty('--progressbar-width', persent(i, formFieldset));\r\n    }\r\n\r\n    const persent = (item, arr) => {\r\n      return `${(item / (arr.length - 1)) * 100}%`;\r\n    };\r\n\r\n    // расположение элементов в прогрессбаре\r\n    for (let i = 0; i < progressbarItem.length; i++) {\r\n      progressbarItem[i].style\r\n        .setProperty('left', persent(i, progressbarItem));\r\n    }\r\n  }\r\n\r\n  //кастомный селект\r\n  if (qOne('.select')) {\r\n    const selectHeader = qAll('.select__header');\r\n    if (selectHeader) {\r\n      for (let item of selectHeader) {\r\n        let select = item.closest('.select');\r\n        let options = select.querySelectorAll('option');\r\n\r\n        select\r\n          .querySelector('span')\r\n          .innerText = options[0].innerText;\r\n\r\n        for (let option of options) {\r\n          option.closest('.select')\r\n            .querySelector('ul').innerHTML\r\n            += `<li class=\"select__item\">${option.innerText}</li>`\r\n\r\n          if (option.hasAttribute('selected')) {\r\n\r\n            option.closest('.select')\r\n              .querySelector('span')\r\n              .innerText = option.innerText;\r\n          }\r\n        }\r\n\r\n        let selectItem = select.querySelectorAll('li');\r\n        for (let i = 0; i < selectItem.length; i++) {\r\n          selectItem[i].addEventListener('click', () => {\r\n            select.querySelector('select').value = selectItem[i].innerText;\r\n            select.querySelector('.select__current').innerText = selectItem[i].innerText;\r\n            select.classList.remove('select--active');\r\n          });\r\n        }\r\n\r\n        item.addEventListener('click', function () {\r\n          this.closest('.select').classList.toggle('select--active');\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // маска телефона по умолчанию +7\r\n  function maskPhone(selector, masked = '+7 (___) ___-__-__') {\r\n    const elems = document.querySelectorAll(selector);\r\n\r\n    function mask(event) {\r\n      const keyCode = event.keyCode;\r\n      const template = masked,\r\n        def = template.replace(/\\D/g, \"\"),\r\n        val = this.value.replace(/\\D/g, \"\");\r\n      let i = 0,\r\n        newValue = template.replace(/[_\\d]/g, function (a) {\r\n          return i < val.length ? val.charAt(i++) || def.charAt(i) : a;\r\n        });\r\n      i = newValue.indexOf(\"_\");\r\n      if (i !== -1) {\r\n        newValue = newValue.slice(0, i);\r\n      }\r\n      let reg = template.substr(0, this.value.length).replace(/_+/g,\r\n        function (a) {\r\n          return \"\\\\d{1,\" + a.length + \"}\";\r\n        }).replace(/[+()]/g, \"\\\\$&\");\r\n      reg = new RegExp(\"^\" + reg + \"$\");\r\n      if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) {\r\n        this.value = newValue;\r\n      }\r\n      if (event.type === \"blur\" && this.value.length < 5) {\r\n        this.value = \"\";\r\n      }\r\n\r\n    }\r\n\r\n    for (const elem of elems) {\r\n      elem.addEventListener(\"input\", mask);\r\n      elem.addEventListener(\"focus\", mask);\r\n      elem.addEventListener(\"blur\", mask);\r\n    }\r\n\r\n  }\r\n  maskPhone('[type=tel]');\r\n\r\n});"]}